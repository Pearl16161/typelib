# $Revision: 1072 $
# $Id: Makefile-test.in 1072 2005-10-13 09:45:27Z sjoyeux $

abs_top_srcdir=@abs_top_srcdir@
top_srcdir=@top_srcdir@
top_builddir=@top_builddir@
srcdir=@srcdir@
builddir=@builddir@

SUDBIRS=ruby
include $(top_builddir)/mk/init.mk

TEST_RUN_DIR=$(srcdir)
UNIT_TEST=typelib
typelib_CPPFLAGS = -I$(top_srcdir) -I$(builddir) $(UTILMM_CXXFLAGS)
typelib_CXXFLAGS = -fno-strict-aliasing
typelib_LDFLAGS = $(top_builddir)/typelib/libtypeLib.la $(top_builddir)/lang/cimport/libtypeLang_c.la $(top_builddir)/lang/tlb/libtypeLang_tlb.la $(ANTLR_LDFLAGS) $(UTILMM_LDFLAGS)

ifeq ($(HAS_RUBY_SUPPORT),yes)
build: ruby/Makefile
	$(MAKE) -C ruby

ifneq ($(TESTRB),)
test: ruby-test
ruby-test:
	cd $(builddir)/ruby && $(TESTRB) $(abs_top_srcdir)/test/ruby
endif
endif

include $(top_srcdir)/mk/test.mk
include $(top_srcdir)/mk/depend.mk
include $(top_srcdir)/mk/recurse.mk

