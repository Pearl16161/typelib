# $Revision: 1072 $
# $Id: Makefile-test.in 1072 2005-10-13 09:45:27Z sjoyeux $

top_srcdir=@top_srcdir@
top_builddir=@top_builddir@
srcdir=@srcdir@
builddir=@builddir@

include $(top_builddir)/mk/init.mk

TEST_RUN_DIR=$(srcdir)
UNIT_TEST=typelib
typelib_CPPFLAGS = -I$(top_srcdir) -I$(builddir) $(UTILMM_CXXFLAGS)
typelib_CXXFLAGS = 
typelib_LDFLAGS = $(top_builddir)/typelib/libtypeLib.la $(top_builddir)/lang/cimport/libtypeLang_c.la $(top_builddir)/lang/tlb/libtypeLang_tlb.la $(ANTLR_LDFLAGS) $(UTILMM_LDFLAGS)

ruby/Makefile: ruby/extconf.rb
	$(RUBY) -C ruby extconf.rb

build: ruby/Makefile
	$(MAKE) -C ruby

ifeq ($(HAS_RUBY_SUPPORT),yes)
test: ruby-test
ruby-test:
	cd $(builddir)/ruby && $(TESTRB) $(top_srcdir)/test/ruby
endif

include $(top_srcdir)/mk/test.mk
include $(top_srcdir)/mk/depend.mk

